<Page
    x:Class="Wimi.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Wimi"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:Microsoft.Toolkit.Uwp.UI.Controls"
    mc:Ignorable="d">

    <Page.Resources>
        <Storyboard x:Name="GradientAnimation" RepeatBehavior="Forever" SpeedRatio="0.4">
            <ColorAnimationUsingKeyFrames 
                Storyboard.TargetName="GridVoice"
                Storyboard.TargetProperty="(UIElement.Background).(LinearGradientBrush.GradientStops)[0].(GradientStop.Color)"
                EnableDependentAnimation="True"
                BeginTime="-0:0:0.5">
                <LinearColorKeyFrame KeyTime="0:0:01" Value="#FF0000"/>
                <LinearColorKeyFrame KeyTime="0:0:02" Value="#FFFF00"/>
                <LinearColorKeyFrame KeyTime="0:0:03" Value="#000000"/>
                <LinearColorKeyFrame KeyTime="0:0:04" Value="#00FFFF"/>
                <LinearColorKeyFrame KeyTime="0:0:05" Value="#0000FF"/>
                <LinearColorKeyFrame KeyTime="0:0:06" Value="#FF00FF"/>
                <LinearColorKeyFrame KeyTime="0:0:07" Value="#FF0000"/>
            </ColorAnimationUsingKeyFrames >
            <ColorAnimationUsingKeyFrames
                Storyboard.TargetName="GridVoice"
                Storyboard.TargetProperty="(UIElement.Background).(LinearGradientBrush.GradientStops)[1].(GradientStop.Color)"
                EnableDependentAnimation="True">
                <LinearColorKeyFrame KeyTime="0:0:01" Value="#FF0000"/>
                <LinearColorKeyFrame KeyTime="0:0:02" Value="#FFFF00"/>
                <LinearColorKeyFrame KeyTime="0:0:03" Value="#000000"/>
                <LinearColorKeyFrame KeyTime="0:0:04" Value="#00FFFF"/>
                <LinearColorKeyFrame KeyTime="0:0:05" Value="#0000FF"/>
                <LinearColorKeyFrame KeyTime="0:0:06" Value="#FF00FF"/>
                <LinearColorKeyFrame KeyTime="0:0:07" Value="#FF0000"/>
            </ColorAnimationUsingKeyFrames>
        </Storyboard>
    </Page.Resources>

    <Page.Background>
        <ImageBrush x:Name="BackgroundBrush" ImageSource="Assets/bigBlue.png" Opacity="0.5"  AlignmentX="Center" AlignmentY="Center" Stretch="UniformToFill"></ImageBrush>
    </Page.Background>

    <Grid x:Name="gridRoot"
          Loaded="Grid_Loaded"
          SizeChanged="gridRoot_SizeChanged">
        
        <Grid>
            <StackPanel>

                <!--카메라프리뷰-->
                <CaptureElement x:Name="captureElement" Visibility="Collapsed"
                            Margin="20" Width="300"
                            VerticalAlignment="Top" 
                            HorizontalAlignment="Left"/>
                <!--임시얼굴인식버튼(Hello Or Wimi 명령으로 대체)-->
                <Button x:Name="btnCapture" Content="인식" Click="btnCapture_Click" Visibility="Collapsed"/>

            </StackPanel>
        </Grid>

        <!--오른쪽 영역-->
        <Grid VerticalAlignment="Top">
            <StackPanel x:Name="spUser" Orientation="Horizontal" HorizontalAlignment="Right" Visibility="Collapsed">
                <TextBlock Text="&#xE13D;" FontFamily="Segoe MDL2 Assets" FontSize="60" Margin="0,0,15,0"></TextBlock>
                <StackPanel Orientation="Vertical" VerticalAlignment="Bottom">
                    <!--얼굴인식누구-->
                    <TextBlock x:Name="tbFaceName" Text="{Binding CurrentUser}" FontSize="30"/>
                    <!--얼굴인식감정-->
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="&#xE0A5;" FontFamily="Segoe MDL2 Assets" Foreground="Pink" FontSize="20" Margin="0,5,5,0"/>
                        <TextBlock x:Name="tbEmotion" Text="Neutral" FontSize="20"/>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </Grid>

        <MediaElement x:Name="mediaElement" Height="500" VerticalAlignment="Bottom" HorizontalAlignment="Center" Visibility="Visible"
                      AutoPlay="True" AreTransportControlsEnabled="True" Source="Assets/Puppy_Love.mp3" Volume="0.1" Stretch="Uniform"/>

        <!--왼쪽 상단-->
        <!--대화창-->
        <TextBlock x:Name="tbHello" FontWeight="Light" Margin="10,0,12,0"
                           FontSize="120" VerticalAlignment="Top" HorizontalAlignment="Left"
                           Foreground="White" Visibility="Collapsed"></TextBlock>

        <StackPanel Margin="10,0,10,0" VerticalAlignment="Top" HorizontalAlignment="Left">
            <TextBlock x:Name="tbRecog" FontWeight="ExtraLight" 
                   FontSize="100" 
                   Foreground="WhiteSmoke" Visibility="Visible"></TextBlock>
            <TextBlock x:Name="resultTextBlock"
                   FontWeight="Light" FontSize="24" Foreground="LightCyan"/>
            <TextBlock x:Name="tbVoiceRecogState" FontWeight="SemiLight"></TextBlock>
        </StackPanel>

        <!--버스-->
        <StackPanel x:Name="spBus" Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0,12,0,12" Visibility="Collapsed">
            <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xEB47;"  Margin="10,0,12,0"
                           FontSize="60" VerticalAlignment="Top" HorizontalAlignment="Center"
                           Foreground="White"></TextBlock>
            <ListBox x:Name="lbBusInfo" Margin="0,-3,0,0" Background="Transparent" IsHitTestVisible="False" Visibility="Visible">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid Margin="5" HorizontalAlignment="Right" Width="430">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                                <!--<ColumnDefinition Width="*"/>-->
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" FontWeight="Light" FontSize="30" Text="{Binding number}" Margin="0,0,0,0"/>
                            <TextBlock Grid.Column="1" FontWeight="Light" FontSize="30" Text="{Binding state}" Margin="0,0,0,0"/>
                            <TextBlock Grid.Column="2" FontWeight="Light" FontSize="30" Text="{Binding position}" Margin="0,0,0,0"/>
                            <!--<TextBlock Grid.Column="3" Text="{Binding note}" Margin="24,0,0,0"/>-->
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </StackPanel>
        <!--뉴스헤드라인-->
        <ListBox x:Name="lbNewsInfo" Background="Transparent" IsHitTestVisible="False" HorizontalAlignment="Left" VerticalAlignment="Top" Visibility="Collapsed" Margin="-30,0,0,0">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid Margin="5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <!--<ColumnDefinition Width="*"/>-->
                        </Grid.ColumnDefinitions>
                        <TextBlock TextAlignment="Right" Grid.Column="0" FontWeight="Light" FontSize="20" Text="{Binding title}" Margin="24,0,0,0"/>
                        <!--<TextBlock Grid.Column="3" Text="{Binding note}" Margin="24,0,0,0"/>-->
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <!--날씨예보-->
        <ListBox x:Name="lbForcastInfo" Background="Transparent" IsHitTestVisible="False" Visibility="Collapsed">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid Margin="0,-10,0,-10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="230"/>
                            <ColumnDefinition Width="140"/>
                            <ColumnDefinition Width="140"/>
                            <!--<ColumnDefinition Width="*"/>-->
                        </Grid.ColumnDefinitions>
                        <TextBlock TextAlignment="Right" FontWeight="Light"  FontSize="70" Grid.Column="0" Text="{Binding hourStr}" Margin="0,0,40,0"/>
                        <TextBlock FontWeight="Light" FontFamily="Segoe UI Symbol" FontSize="70" Grid.Column="1" Text="{Binding statSymbol}" Margin="24,0,0,0"/>
                        <TextBlock FontWeight="Light" FontSize="70" Grid.Column="2" Text="{Binding temperture}" Margin="24,0,0,0"/>
                        <TextBlock Text="℃" HorizontalAlignment="Right" Margin="0,10,5,0" FontWeight="Light" FontSize="40" Grid.Column="2"/>
                        <!--<TextBlock Grid.Column="3" Text="{Binding note}" Margin="24,0,0,0"/>-->
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <!--왼쪽 상단 끝-->
        
        <!--오른쪽 상단--> 
        <!--일정-->
        <StackPanel x:Name="spSchedule" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,80,0,0" Visibility="Collapsed">
            <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE1DC;"  Margin="10,0,12,0"
                           FontSize="60" VerticalAlignment="Top" HorizontalAlignment="Center"
                           Foreground="White"></TextBlock>
            <!--<TextBlock Text="Calendar" FontFamily="Segoe UI" FontSize="50"/>-->
            <ListBox x:Name="lbScheduleInfo" Background="Transparent" IsHitTestVisible="False">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid Margin="0,-5,0,-5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock FontWeight="Normal" FontSize="35" Grid.Column="0" Text="{Binding dt}" Margin="0,0,0,0"/>
                            <TextBlock HorizontalAlignment="Right" FontWeight="Light" FontSize="35" Grid.Column="1" Text="{Binding subject}"/>
                            <TextBlock Grid.Column="3" Text="{Binding note}" Margin="24,0,0,0"/>
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </StackPanel>
        <!--오른쪽 상단 끝-->

        <!--왼쪽 하단-->
        <!--시계 + 음성인식 가능여부-->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Bottom">
            <StackPanel Margin="20,0,0,12">
                <TextBlock x:Name="tbDateTime" Margin="0,0,0,0"
                        FontSize="40" FontWeight="Light"
                        HorizontalAlignment="Left"></TextBlock>
                <TextBlock x:Name="tbTime" Margin="0,-20,35,0"
                        HorizontalAlignment="Left"
                        FontSize="80" FontWeight="Light" Foreground="WhiteSmoke"></TextBlock>
            </StackPanel>
            <TextBlock x:Name="tbVoiceRecogReady" FontFamily="Segoe MDL2 Assets" Text="&#xEC54;" FontSize="60" VerticalAlignment="Center" Foreground="DeepPink" Margin="0,20,0,0" Visibility="Collapsed"></TextBlock>
        </StackPanel>
        <!--왼쪽 하단 끝-->

        <!--오른쪽 하단-->
        <!--날씨-->
        <StackPanel Orientation="Horizontal" VerticalAlignment="Bottom" HorizontalAlignment="Right" Loaded="tbWeather_Loaded">
            <StackPanel Orientation="Horizontal" Margin="0,-10,0,0">
                <TextBlock x:Name="tbTc" Margin="12,0,0,12" FontWeight="Light"
                               FontSize="80" VerticalAlignment="Bottom" Text="25"/>
                <TextBlock Text="℃" Margin="0,0,0,40" FontWeight="Light" FontSize="42" VerticalAlignment="Center"/>
                <TextBlock x:Name="tbSky" FontFamily="Segoe UI Symbol" Text="&#xE288;"
                               FontSize="80" />
            </StackPanel>

            <!--<TextBlock x:Name="tbWeather" FontSize="60" Loaded="tbWeather_Loaded"/>
                    <TextBlock Text="℃" FontSize="60"/>-->
        </StackPanel>
        <!--오른쪽 하단 끝-->
        <Grid x:Name="GridVoice" Opacity="1">
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Offset="0"/>
                    <GradientStop Offset="1"/>
                </LinearGradientBrush>
            </Grid.Background>
        </Grid>
        
        <!--<Image Source="Assets/bigBlue.png" Opacity="0.5" Stretch="UniformToFill" Width="1920" ></Image>-->

        <Viewbox Width="400" Height="300">
            <Image Margin="20" HorizontalAlignment="Center" VerticalAlignment="Top" Stretch="None">
                <Image.Source>
                    <BitmapImage x:Name="VoiceRecogEffect" AutoPlay="False"
                        UriSource="Assets\circle.gif" ImageOpened="ClickToPlaySource_ImageOpened"/>
                </Image.Source>
            </Image>
        </Viewbox>

        <TextBlock x:Name="tbMicSymbol" FontFamily="Segoe MDL2 Assets" Text="&#xEC71;"  Margin="0,0,0,0"
                           FontSize="42" VerticalAlignment="Center" HorizontalAlignment="Center"
                           Foreground="White" DoubleTapped="tbMicSymbol_DoubleTapped" ></TextBlock>

        <StackPanel x:Name="PlaybackButtons" Orientation="Horizontal" Visibility="Collapsed" Margin="30">
            <Button
                    x:Name="PlayButton"
                    Click="{x:Bind VoiceRecogEffect.Play}"
                    Content="Play"
                    Margin="10,0,0,0"/>
            <Button
                    x:Name="StopButton"
                    Click="{x:Bind VoiceRecogEffect.Stop}"
                    Content="Stop"
                    Margin="10,0,0,0"/>
        </StackPanel>
    </Grid>
</Page>
